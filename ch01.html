<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" class="no-js"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script><title>Chapter 1. General use</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link href="https://purl.org/dc/elements/1.1/" rel="schema.dc"/><meta name="dc.modified" content="2023-07-23T20:18:45Z"/><meta name="generator" content="DocBook xslTNG version 2.1.6 / cf0b935 / SAXON EE 12.3"/><link href="/css/docbook-toc.css" rel="stylesheet"/><link href="/css/docbook.css" rel="stylesheet" media="screen"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><script src="https://kit.fontawesome.com/498b6706f0.js" type="text/javascript" crossorigin="anonymous"></script><link href="/icon/CoffeeGrinder.png" rel="shortcut icon"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link href="/css/nineml.css" rel="stylesheet"/><link href="/css/coffeegrinder.css" rel="stylesheet"/><link rel="prev" href="pf01.html"/><link rel="next" href="appa.html"/><link rel="up" href="index.html"/><link rel="home" href="index.html"/><script src="/js/persistent-toc.js" defer="defer"></script><script src="/js/copy-verbatim.js" defer="defer"></script><script src="/js/chunk-nav.js" defer="defer"></script></head><body><nav class="top"><span class="nav"><a title="CoffeeGrinder" href="index.html"><i class="fas fa-home"></i></a> <a href="pf01.html" title="Introduction"><i class="fas fa-arrow-left"></i></a> <a title="CoffeeGrinder" href="index.html"><i class="fas fa-arrow-up"></i></a> <a title="Appendix  A .  Earley Parser" href="appa.html"><i class="fas fa-arrow-right"></i></a></span><span class="title"><i class="title">CoffeeGrinder</i></span></nav><main><section id="R_ch1" db-chunk="ch01.html" db-id="d93e38" class="chapter component"><header><h2>Chapter <span class="label">1</span><span class="sep">. </span>General use</h2></header><p>This is just an overview, consult the 
<a href="apidoc" class="link">JavaDoc</a> for more details.</p><div class="programlistingco"><div class="pre-wrap" db-startinglinenumber="1" db-numberoflines="43"><pre class="language-java long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln"> 1 <span class="nsep">|</span></span><span class="ld"><code>                                                                <a id="ex_opt" class="callout-bug linecolumn" db-line="1" db-column="65">①</a></code></span></span>
<span class="line" db-line="2"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>        NonterminalSymbol S = grammar.getNonterminal("S");      <a id="ex_g" class="callout-bug linecolumn" db-line="2" db-column="65">②</a></code></span></span>
<span class="line" db-line="3"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>        NonterminalSymbol A = grammar.getNonterminal("A");</code></span></span>
<span class="line" db-line="4"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>        NonterminalSymbol B = grammar.getNonterminal("B");      <a id="ex_ntg" class="callout-bug linecolumn" db-line="4" db-column="65">③</a></code></span></span>
<span class="line" db-line="5"><span class="ln"> 5 <span class="nsep">|</span></span><span class="ld"><code>        NonterminalSymbol X = grammar.getNonterminal("X");</code></span></span>
<span class="line" db-line="6"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>        NonterminalSymbol Y = grammar.getNonterminal("Y");</code></span></span>
<span class="line" db-line="7"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="8"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>        grammar.addRule(S, A);</code></span></span>
<span class="line" db-line="9"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>        grammar.addRule(S, B);</code></span></span>
<span class="line" db-line="10"><span class="ln">10 <span class="nsep">|</span></span><span class="ld"><code>        grammar.addRule(A, Termina<a id="ex_r1a" class="callout-bug linecolumn" db-line="10" db-column="35">④</a>lSymbol.ch('a'), X);</code></span></span>
<span class="line" db-line="11"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>        grammar.addRule(A, TerminalSymbol.ch('b'), X);</code></span></span>
<span class="line" db-line="12"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>        grammar.addRule(B, TerminalSymbol.ch('b'), X);          <a id="ex_term" class="callout-bug linecolumn" db-line="12" db-column="65">⑤</a></code></span></span>
<span class="line" db-line="13"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>        grammar.addRule(X, TerminalSymbol.ch('x'));</code></span></span>
<span class="line" db-line="14"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>        grammar.addRule(Y, TerminalSymbol.ch('y'));</code></span></span>
<span class="line" db-line="15"><span class="ln">15 <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="16"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>        ParserGrammar pgrammar = grammar.getCompiledGrammar(S);</code></span></span>
<span class="line" db-line="17"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="18"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>        HygieneReport report = pgrammar.getHygieneReport();     <a id="ex_pgram" class="callout-bug linecolumn" db-line="18" db-column="65">⑥</a></code></span></span>
<span class="line" db-line="19"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>        if (!report.isClean()) {</code></span></span>
<span class="line" db-line="20"><span class="ln">20 <span class="nsep">|</span></span><span class="ld"><code>            // TODO: deal with undefined, unused, and unproducti<a id="ex_hyg" class="callout-bug linecolumn" db-line="20" db-column="65">⑦</a>ve items</code></span></span>
<span class="line" db-line="21"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>        }</code></span></span>
<span class="line" db-line="22"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="23"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>        GearleyParser parser = pgrammar.getParser(options);</code></span></span>
<span class="line" db-line="24"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="25"><span class="ln">25 <span class="nsep">|</span></span><span class="ld"><code>        GearleyResult result = parser.parse("bx");              <a id="ex_parser" class="callout-bug linecolumn" db-line="25" db-column="65">⑧</a></code></span></span>
<span class="line" db-line="26"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="27"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>        if (result.succeeded()) {                     <a id="ex_result" class="callout-bug linecolumn" db-line="27" db-column="55">⑨</a></code></span></span>
<span class="line" db-line="28"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>            GenericTreeBuilder builder = new GenericTreeBuilder();</code></span></span>
<span class="line" db-line="29"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>            ParseForest forest = result.getForest();  <a id="ex_success" class="callout-bug linecolumn" db-line="29" db-column="55">⑩</a></code></span></span>
<span class="line" db-line="30"><span class="ln">30 <span class="nsep">|</span></span><span class="ld"><code>            Arborist.getArborist(forest).getTree(builder);</code></span></span>
<span class="line" db-line="31"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>            GenericTree tree = builder.getTree();     <a id="ex_forest" class="callout-bug linecolumn" db-line="31" db-column="55">⑪</a></code></span></span>
<span class="line" db-line="32"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="33"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>            // TODO: do something with the tree.      <a id="ex_tree" class="callout-bug linecolumn" db-line="33" db-column="55">⑫</a></code></span></span>
<span class="line" db-line="34"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="35"><span class="ln">35 <span class="nsep">|</span></span><span class="ld"><code>            if (forest.isAmbiguous()) {</code></span></span>
<span class="line" db-line="36"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>                long totalParses = forest.getParseTreeCount();</code></span></span>
<span class="line" db-line="37"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>                // TODO: deal with multiple parses    <a id="ex_amb" class="callout-bug linecolumn" db-line="37" db-column="55">⑬</a></code></span></span>
<span class="line" db-line="38"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>            }</code></span></span>
<span class="line" db-line="39"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>        } else {</code></span></span>
<span class="line" db-line="40"><span class="ln">40 <span class="nsep">|</span></span><span class="ld"><code>            // TODO: deal with failure</code></span></span>
<span class="line" db-line="41"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>        }</code></span></span>
<span class="line" db-line="42"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>    }</code></span></span>
<span class="line" db-line="43"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>}</code></span></span>
</pre></div><div class="calloutlist"><dl><dt class="callout"><a class="callout-bug" href="#ex_opt">①</a></dt><dd><p>Create the
<a href="apidoc/org/nineml/coffeegrinder/parser/ParserOptions.html" class="link">ParserOptions</a>.
</p></dd><dt class="callout"><a class="callout-bug" href="#ex_g">②</a></dt><dd><p>Create a
<a href="apidoc/org/nineml/coffeegrinder/parser/SourceGrammar.html" class="link">SourceGrammar</a>.
</p></dd><dt class="callout"><a class="callout-bug" href="#ex_ntg">③</a></dt><dd><p>Use the grammar to create nonterminal symbols.
</p></dd><dt class="callout"><a class="callout-bug" href="#ex_r1a">④</a></dt><dd><p>Create rules mapping each nonterminal symbol to zero or more other symbols.
</p></dd><dt class="callout"><a class="callout-bug" href="#ex_term">⑤</a></dt><dd><p>Several flavors of
<a href="apidoc/org/nineml/coffeegrinder/parser/TerminalSymbol.html" class="link">TerminalSymbol</a>
are supported out-of-the-box and the set of
<a href="apidoc/org/nineml/coffeegrinder/tokens/Token.html" class="link">Tokens</a>
is extensible.
</p></dd><dt class="callout"><a class="callout-bug" href="#ex_pgram">⑥</a></dt><dd><p>Get a parser grammar from the (current state of) the source grammar.
</p></dd><dt class="callout"><a class="callout-bug" href="#ex_hyg">⑦</a></dt><dd><p><a href="apidoc/org/nineml/coffeegrinder/parser/HygieneReport.html" class="link">Hygiene</a>
problems with a parser grammar will generate warning messages through the
<a href="apidoc/org/nineml/logging/package-summary.html" class="link">logging framework</a>.
Hygiene problems include undefined or unused symbols as well as unproductive symbols
and rules.
</p></dd><dt class="callout"><a class="callout-bug" href="#ex_parser">⑧</a></dt><dd><p>Create a
<a href="apidoc/org/nineml/coffeegrinder/parser/EarleyParser.html" class="link">parser</a>.
</p></dd><dt class="callout"><a class="callout-bug" href="#ex_result">⑨</a></dt><dd><p>Parse some input.
</p></dd><dt class="callout"><a class="callout-bug" href="#ex_success">⑩</a></dt><dd><p>Examine the
<a href="apidoc/org/nineml/coffeegrinder/parser/EarleyResult.html" class="link">results</a>.
</p></dd><dt class="callout"><a class="callout-bug" href="#ex_forest">⑪</a></dt><dd><p>Obtain the
<a href="apidoc/org/nineml/coffeegrinder/parser/ParseForest.html" class="link">forest</a>.
</p></dd><dt class="callout"><a class="callout-bug" href="#ex_tree">⑫</a></dt><dd><p>Get the (first)
<a href="apidoc/org/nineml/coffeegrinder/parser/ParseTree.html" class="link">parse tree</a>.
</p></dd><dt class="callout"><a class="callout-bug" href="#ex_amb">⑬</a></dt><dd><p>If the parse was ambiguous, you can get additional parse trees.
</p></dd></dl></div></div></section></main><nav class="bottom"><div class="navrow"><div class="navleft"><a title="Introduction" href="pf01.html"><i class="fas fa-arrow-left"></i></a></div><div class="navmiddle"><a title="CoffeeGrinder" href="index.html"><i class="fas fa-home"></i></a></div><div class="navright"><a title="Appendix  A .  Earley Parser" href="appa.html"><i class="fas fa-arrow-right"></i></a></div></div><div class="navrow"><div class="navleft navtitle">Introduction</div><div class="navmiddle"><a title="CoffeeGrinder" href="index.html"><i class="fas fa-arrow-up"></i></a></div><div class="navright navtitle">Appendix  A .  Earley Parser</div></div><div class="infofooter"><span class="copyrightfooter">Copyright © 2022–2023 Norman Walsh.</span></div><nav class="tocopen"></nav><nav class="toc"></nav><!-- Hide ToC details from user agents that don’t support JS --><script type="text/html" class="tocopen"><i class="far fa-book"></i></script><script type="text/html" class="toc"><header><span>Table of Contents</span><span class="close"><i class="far fa-window-close"></i></span><p class="ptoc-search"><input class="ptoc-search" placeholder="Search" style="width: 80%"/></p></header><div db-persistent-toc="persistent-toc.html" db-prefix="">Loading…</div></script></nav></body></html>